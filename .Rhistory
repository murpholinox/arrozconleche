filter(is.na(ide)) # Si tiene identificador se queda
write_excel_csv(fil2b, "/run/media/murphy/lolita/doctorado/clean/fil2.csv")
#wc -l fil2.csv
#69689 fil2.csv
sin_ide <- fil2a %>%
filter(ide ="")
sin_ide <- fil2a %>%
filter(ide =="")
print(sin_ide)
# Filtro 1
fil1 <- df2 %>%
filter(rs1 <= 2.0)
# Filtro 2
fil2a <-fil1 %>%
filter(!is.na(peh)) # Si no tiene pH se queda
fil2b <-fil2a %>%
filter(ide =="") # Si no tiene identificador se queda
write_excel_csv(fil2b, "/run/media/murphy/lolita/doctorado/clean/fil2.csv")
#wc -l fil2.csv
#69689 fil2.csv
# Filtro 1
fil1 <- df2 %>%
filter(rs1 <= 2.0)
# Filtro 2
fil2a <-fil1 %>%
filter(!is.na(peh)) # Si no tiene pH se queda
fil2b <-fil2a %>%
filter(!ide =="") # Si no tiene identificador se queda
write_excel_csv(fil2b, "/run/media/murphy/lolita/doctorado/clean/fil2.csv")
#wc -l fil2.csv
#69689 fil2.csv
sessionInfo()
install.packages("tidyverse")
R.version()
require(graphics)
R.version()
R.version()$running
sessionInfo()$running
sessionInfo()$OsVersion
inf<-sessionInfo()
inf
rm(inf)
todo2 <- read_delim("/run/media/murphy/lolita/doctorado/extract/todo2",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
library(tidyverse)
library(knitr)
library(kableExtra)
todo2 <- read_delim("/run/media/murphy/lolita/doctorado/extract/todo2",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
# La configuración regional de mi sistema está en inglés, `R` también por lo que no reconoce '¿'.
pdb<-todo2$X1
nde<-stringr::str_replace(todo2$X2, '�', '')
tde<-stringr::str_replace(todo2$X3, '�', '')
ide<-stringr::str_replace(todo2$X4, '�', '')
nom<-stringr::str_replace(todo2$X5, '�', '')
tec<-stringr::str_replace(todo2$X6, '�', '')
peh<-stringr::str_replace(todo2$X7, '�', '')
con<-stringr::str_replace(todo2$X8, '�', '')
rs1<-stringr::str_replace(todo2$X9, '�', '')
rs2<-stringr::str_replace(todo2$X10, '�', '')
gpo<-stringr::str_replace(todo2$X11, '�', '')
doi<-stringr::str_replace(todo2$X12, '�', '')
datos<-data.frame(pdb, nde, tde, ide, nom, tec, peh, con, rs1, rs2, gpo, doi)
rm(pdb, nde, tde, ide, nom, tec, peh, con, rs1, rs2, gpo, doi)
# Cuidado con el tipo de las columnas.
datos$nde<-as.numeric(as.character((datos$nde)))
datos$peh<-as.numeric(as.character((datos$peh)))
datos$rs1<-as.numeric(as.character((datos$rs1)))
datos$rs2<-as.numeric(as.character((datos$rs2)))
# Verificamos los datos al graficar algunas variables interesantes:
theme_set(theme_bw())
# Histograma del pH.
ggplot(data = datos, aes(x=peh)) + geom_histogram(binwidth = 0.5) + labs(x="pH", y="Frecuencia") + xlim(1, 11)
# Histograma de la resolución.
ggplot(data = datos, aes(x=rs1)) + geom_histogram(binwidth = 0.1) + labs(x="Resolución (Å)", y="Frecuencia")
# Histograma del número de entidades.
ggplot(data = datos, aes(x=nde)) + geom_histogram(binwidth = 1) + labs(x="Número de entidades", y="Frecuencia")
# Determina cuentas por grupo de grupos espaciales y tido de entidad.
df1<-datos %>%
add_count(gpo, name = "cta_gpo")
df2<-df1 %>%
add_count(tde, name = "cta_tde")
df3<-datos %>%
count(gpo, name = "cta_gpo") %>%
arrange(desc(cta_gpo))
df4<-datos %>%
count(tde, name = "cta_tde") %>%
arrange(desc(cta_tde))
# Gráfico de barras de los grupos espaciales.
ggplot(data = df1, aes(x=reorder(gpo, cta_gpo))) + geom_bar() + labs(x="Grupo espacial", y="Frecuencia") + theme(axis.text.x = element_text(angle = 90))
# Es interesante notar que el número de grupos espaciales es mayor a 65.
gpo_rar <- df1 %>%
filter(cta_gpo <= 15)
# Gráfico de barras de los grupos espaciales menos comunes.
ggplot(data = gpo_rar, aes(x=reorder(gpo, cta_gpo))) + geom_bar() + labs(x="Grupo espacial", y="Frecuencia", title = "Grupos espaciales con una frecuencia menor o igual a 15") + coord_flip()#+ theme(axis.text.x = element_text(size = 12, angle = 45))
# Genera tablas.
tab_gpo<-head(df3, n=100)
# Tabla de los cien grupos espaciales más comunes.
kable(tab_gpo) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width=F)
# Tabla del total, por grupo, del tipo de entidad.
tab_tde<-head(df4, n=10)
kable(tab_tde) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width=F)
rm(todo2)
# Guarda datos como `.csv`.
write_excel_csv(df2, "/run/media/murphy/lolita/doctorado/extract/df2.csv")
View(df4)
library(tidyverse)
library(knitr)
library(kableExtra)
todo2 <- read_delim("/run/media/murphy/lolita/doctorado/extract/todo2",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
# La configuración regional de mi sistema está en inglés, `R` también por lo que no reconoce '¿'.
pdb<-todo2$X1
nde<-stringr::str_replace(todo2$X2, '�', '')
tde<-stringr::str_replace(todo2$X3, '�', '')
ide<-stringr::str_replace(todo2$X4, '�', '')
nom<-stringr::str_replace(todo2$X5, '�', '')
tec<-stringr::str_replace(todo2$X6, '�', '')
peh<-stringr::str_replace(todo2$X7, '�', '')
con<-stringr::str_replace(todo2$X8, '�', '')
rs1<-stringr::str_replace(todo2$X9, '�', '')
rs2<-stringr::str_replace(todo2$X10, '�', '')
gpo<-stringr::str_replace(todo2$X11, '�', '')
doi<-stringr::str_replace(todo2$X12, '�', '')
datos<-data.frame(pdb, nde, tde, ide, nom, tec, peh, con, rs1, rs2, gpo, doi)
rm(pdb, nde, tde, ide, nom, tec, peh, con, rs1, rs2, gpo, doi)
# Cuidado con el tipo de las columnas.
datos$nde<-as.numeric(as.character((datos$nde)))
datos$peh<-as.numeric(as.character((datos$peh)))
datos$rs1<-as.numeric(as.character((datos$rs1)))
datos$rs2<-as.numeric(as.character((datos$rs2)))
# Verificamos los datos al graficar algunas variables interesantes:
theme_set(theme_bw())
# Histograma del pH.
ggplot(data = datos, aes(x=peh)) + geom_histogram(binwidth = 0.5) + labs(x="pH", y="Frecuencia") + xlim(1, 11)
# Histograma de la resolución.
ggplot(data = datos, aes(x=rs1)) + geom_histogram(binwidth = 0.1) + labs(x="Resolución (Å)", y="Frecuencia")
# Histograma del número de entidades.
ggplot(data = datos, aes(x=nde)) + geom_histogram(binwidth = 1) + labs(x="Número de entidades", y="Frecuencia")
# Determina cuentas por grupo de grupos espaciales y tido de entidad.
df1<-datos %>%
add_count(gpo, name = "cta_gpo")
df2<-df1 %>%
add_count(tde, name = "cta_tde")
tab_gpo<-datos %>%
count(gpo, name = "cta_gpo") %>%
arrange(desc(cta_gpo))
tab_tde<-datos %>%
count(tde, name = "cta_tde") %>%
arrange(desc(cta_tde))
# Gráfico de barras de los grupos espaciales.
ggplot(data = df1, aes(x=reorder(gpo, cta_gpo))) + geom_bar() + labs(x="Grupo espacial", y="Frecuencia") + theme(axis.text.x = element_text(angle = 90))
# Es interesante notar que el número de grupos espaciales es mayor a 65.
gpo_rar <- df2 %>%
filter(cta_gpo <= 15)
# Gráfico de barras de los grupos espaciales menos comunes.
ggplot(data = gpo_rar, aes(x=reorder(gpo, cta_gpo))) + geom_bar() + labs(x="Grupo espacial", y="Frecuencia", title = "Grupos espaciales con una frecuencia menor o igual a 15") + coord_flip()#+ theme(axis.text.x = element_text(size = 12, angle = 45))
# Genera tablas.
# Tabla de los cien grupos espaciales más comunes.
kable(tab_gpo) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width=F)
# Tabla del total, por grupo, del tipo de entidad.
kable(tab_tde) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width=F)
rm(todo2, df1)
# Guarda datos como `.csv`.
write_excel_csv(df2, "/run/media/murphy/lolita/doctorado/extract/df2.csv")
rm(datos)
# Filtro 0
fil0 <-df2 %>%
filter(!ide =="") # Si no tiene identificador se va.
# Filtro 1
fil1 <- fil0 %>%
filter(rs1 <= 2.0) # Mala resolución no me sirve.
# Filtro 2
fil2 <-fil1 %>%
filter(!is.na(peh)) # Si no tiene pH se va.
write_excel_csv(fil2, "/run/media/murphy/lolita/doctorado/clean/fil2.csv")
#wc -l fil2.csv
#69669 fil2.csv
# Filtro 0
fil0 <-df2 %>%
filter(!ide =="") # Si no tiene identificador se va.
# Filtro 1
fil1 <- fil0 %>%
filter(rs1 <= 2.0) # Mala resolución no me sirve.
# Filtro 2
fil2 <-fil1 %>%
filter(!is.na(peh)) # Si no tiene pH se va.
write_excel_csv(fil2, "/run/media/murphy/lolita/doctorado/clean/fil2.csv")
#wc -l fil2.csv
#69669 fil2.csv
# Carga fil3.
fil3 <- read_csv("/run/media/murphy/lolita/doctorado/clean/fil3.csv")
p00698 <- fil3 %>%
filter(ide == "P00698")
write_excel_csv(p00698, "/run/media/murphy/lolita/doctorado/prueba/p00698.csv")
p00698 <- fil3 %>%
filter(ide == "P00698")
write_excel_csv(p00698, "/run/media/murphy/lolita/doctorado/prueba/p00698.csv")
p00698 <- fil3 %>%
filter(ide == "P00698")
write_excel_csv(p00698, "/run/media/murphy/lolita/doctorado/prueba/p00698.csv")
View(fil3)
View(p00698)
multi <- p00698 %>%
filter(nde>=2)
View(multi)
View(multi)
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
View(p00698)
View(prueba1)
# Carga fil3.
fil3 <- read_csv("/run/media/murphy/lolita/doctorado/clean/fil3.csv")
p00698 <- fil3 %>%
filter(ide == "P00698")
write_excel_csv(p00698, "/run/media/murphy/lolita/doctorado/prueba/p00698.csv")
p00698 <- fil3 %>%
filter(ide == "P00698")
write_excel_csv(p00698, "/run/media/murphy/lolita/doctorado/prueba/p00698.csv")
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec<-stringr::str_replace(prueba1$X4, '�', '')
prueba1<-data.frame(pdb, nde, tde, sec)
print(prueba1$sec)
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec<-stringr::str_replace(prueba1$X4, '�', '')
sec1<-stringr::str_replace(sec, '\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
View(prueba1)
View(prueba1)
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec<-stringr::str_replace(prueba1$X4, '�', '')
sec1<-stringr::str_replace(sec, '\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec1)
length(sec1)
length(sec1[1])
sec1
sec1[1,]
sec1[,1]
sec1[[1,]]
sec1[[1]]
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec<-stringr::str_replace(prueba1$X4, '�', '')
sec1<-stringr::str_replace(sec, '[\\n]', '')
prueba1<-data.frame(pdb, nde, tde, sec1)
sec1[[1]]
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec<-stringr::str_replace(prueba1$X4, '�', '')
prueba1<-data.frame(pdb, nde, tde, sec)
sec1[[1]]
seq(1,19)
length(sec)
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
#ulti<-length(sec)
#repe <- seq(1,ult)
#count <- 0
#for (val in x) {
#if(val %% 2 == 0)  count = count+1
#}
sec[[1]]
length(sec[[1]])
str_length(sec[[1]])
ulti<-length(sec)
ulti
repe <- seq(1,ult)
repe <- seq(1,ulti)
repe
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
for (val in repe) {
print(str_length(sec[[val]]))
}
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
for (val in repe) {
lop<-str_length(sec[[val]])
print(lop)
}
lop
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
for (val in repe) {
lop<-c(str_length(sec[[val]]))
print(lop)
}
lop
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
for (val in repe) {
long<-str_length(sec[[val]])
lop <- c(lop, long)
print(lop)
}
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
for (val in repe) {
long<-str_length(sec[[val]])
lop <- c(lop, long)
}
print(lop)
rm(lop)
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
for (val in repe) {
long<-str_length(sec[[val]])
lop <- c(lop, long)
}
x<-c("")
x
x<-c(" ")
x
x<-c()
x
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
x<-c()
for (val in repe) {
long<-str_length(sec[[val]])
lop<-append(x, long)
}
lop
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
x<-c()
for (i in repe) {
long_i<-str_length(sec[[i]])
lop<-stringr::str_c(x, long_i)
}
print(lop)
# Carga fil3.
prueba1 <-read_delim("/run/media/murphy/lolita/doctorado/prueba/prueba1",
"¿", escape_double = FALSE, col_names = FALSE,
comment = "*>", trim_ws = TRUE)
pdb<-prueba1$X1
nde<-stringr::str_replace(prueba1$X2, '�', '')
tde<-stringr::str_replace(prueba1$X3, '�', '')
sec0<-stringr::str_replace(prueba1$X4, '�', '')
sec<-stringr::str_replace_all(sec0, '\\\\n', '')
prueba1<-data.frame(pdb, nde, tde, sec)
ulti<-length(sec)
repe <- seq(1,ulti)
for (i in repe) {
long_i<-str_length(sec[[i]])
lop<-c(lop,long_i)
}
lop
length(lop)
ulti
-str_length(sec[[1]])
str_length(sec[[2]])
str_length(sec[[3]])
str_length(sec[[4]])
str_length(sec[[5]])
lop
lop[2,]
lop[2]
lop[[]2]
lop[2,[]]
lop[2[]]
lop[0]
lop[1]
lop[2]
lop[3]
lop[4]
lop[5]
lop[1]<-c()
type(lop)
class(lop)
factor(lop)
ldp<-factor(lop)
ldp[2,]
ldp<-vector(lop)
ldp<-as.vector(lop)
ldp
ldp[1]
ldp[1,2]
ldp[1,]
ldp<-as.data.frame(lop)
View(ldp)
View(ldp)
ldp = ldp[-1,]
